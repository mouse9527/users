buildscript {
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "gradle.plugin.com.google.cloud.tools:jib-gradle-plugin:$jibVersion"
    }
}

apply plugin: com.google.cloud.tools.jib.gradle.JibPlugin

jib {
    from {
        image = "docker-repository.mouse.center:1443/openjdk:14"
    }
    to {
        image = "docker-push.mouse.center:1443/$rootProject.name/$project.name:latest"
    }
    allowInsecureRegistries = true
}

task push(group: "build") {
    dependsOn(tasks.getByName('jib'))
}
